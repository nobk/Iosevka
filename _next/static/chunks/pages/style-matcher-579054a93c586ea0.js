(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{7613:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/style-matcher",function(){return n(4247)}])},4247:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return StyleMatchTool}});var s=n(5893),a=n(5022),i=n(3513),r=n(9008),o=n.n(r),l=n(7294),c=n(8005),u=n(7714),d=n(4516),p=n(8213),f=n(9072),h=n(9774),m=n(720),g=n(7744),y=n(6787);let v={popup:{popupVisible:!1},name:null,displayName:null,loading:!1,matchSlope:m.m3.Upright},x=(0,l.createContext)(g._.Default(v)),S=(0,l.createContext)(g._.Default(f.sN));function StyleMatchTool(){let e=(0,g.M)(f.sN),t=(0,g.M)(v);return(0,s.jsx)(S.Provider,{value:{...e},children:(0,s.jsxs)(x.Provider,{value:{...t},children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:"Style Matching Tool"})}),(0,s.jsxs)("div",{className:"page",children:[(0,s.jsx)(p.$,{className:"customizer",children:(0,s.jsx)(SettingsPanel,{})}),(0,s.jsx)(p.$,{className:"customizer",children:(0,s.jsx)("div",{className:"style-matcher-panel style-matcher-cv-panel",children:(0,s.jsx)(EditPanel,{})})}),(0,s.jsx)(p.$,{className:"customizer",children:(0,s.jsx)("div",{className:"result-panel",children:(0,s.jsx)(ResultsPanel,{})})})]}),(0,s.jsx)(u.d,{dropInheritedCvs:!0,pCc:e,pUx:g._.Lens(t,"popup")})]})})}function SettingsPanel(){let e=(0,l.useContext)(S),t=(0,l.useContext)(x),n=g._.Lens(e,"serifStyle"),a=g._.Lens(t,"matchSlope");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"config-panel",children:[(0,s.jsxs)("h2",{children:[(0,s.jsx)("em",{children:"01"})," Style Matcher"]}),(0,s.jsx)("div",{className:"customizer-body",children:(0,s.jsx)("dl",{children:(0,s.jsx)("dd",{children:(0,s.jsx)(ReferenceFontUploader,{})})})})]}),(0,s.jsx)("div",{className:"config-co-panel",children:(0,s.jsxs)("div",{className:"customizer-body",children:[(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{children:"Match Serifs"}),(0,s.jsx)("dd",{children:(0,s.jsx)(d.K,{options:m.xE,value:n.val,onChange:n.set})})]}),(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{children:"Match Slope"}),(0,s.jsx)("dd",{children:(0,s.jsx)(d.K,{options:m.dm,value:a.val,onChange:a.set})})]}),(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{}),(0,s.jsx)("dd",{children:(0,s.jsx)(u.Y,{...g._.Lens(t,"popup")})})]})]})})]})}function ReferenceFontUploader(){let e=(0,l.useContext)(x),onFileUpload=async t=>{var n,s;let a=null==t?void 0:null===(s=t.target)||void 0===s?void 0:null===(n=s.files)||void 0===n?void 0:n[0];if(!a)return;e.set((0,i.Uy)(e=>{e.name=null,e.loading=!0}));let r=(null==a?void 0:a.name)||"",o="TARGET-FONT-"+(r.replace(/\.[^/.]+$/,"")||"").replace(/\s/g,"-");await loadFont(o,a),e.set((0,i.Uy)(e=>{e.displayName=r,e.name=o,e.loading=!1}))},t=e.val.loading?"Loading...":"\uD83D\uDCC1 "+(e.val.displayName||"Load reference font..."),n=e.val.loading?null:(0,s.jsx)("input",{type:"file",accept:".ttf,.otf,.woff,woff2",onChange:onFileUpload});return(0,s.jsxs)("label",{className:"file-upload",title:"Load reference font...",children:[t,n]})}async function loadFont(e,t){let n=document.fonts.check('10px "'.concat(e,'"'));if(!n){let n=new FontFace(e,await t.arrayBuffer());try{await n.load(),document.fonts.add(n)}catch(t){console.error("Font ".concat(e," failed to load"))}}}let C=Array.from(h.D.values());function EditPanel(){let e=(0,l.useContext)(S),t=(0,l.useContext)(x),n=e.val,a=t.val.matchSlope,i=(0,f.O)(t.val.matchSlope),r={style:(0,f.gV)(n),slope:a},o=y.yL(n.charVariants,{isSlab:n.serifStyle===m.Hn.Slab,slope:a});return C.map(t=>(0,s.jsxs)("div",{className:"cv-item",children:[(0,s.jsx)(TargetFontSample,{text:t.descSampleText[0]}),(0,s.jsx)(c.nM,{className:"large",prime:t,fontStyle:r,onItemSelect:CvSink(t,i,e),onItemClear:CvClearSink(t,i,e),activeVariantKey:o.resolvedComposition[t.key],activeVariantKind:n.charVariants[i]&&t.key in n.charVariants[i]?c.Ft.NonDefault:c.Ft.Default})]},t.key))}function TargetFontSample(e){let t=(0,l.useContext)(x);return t.val.loading||!t.val.name?null:(0,s.jsx)("div",{className:"target-sample",style:{fontFamily:t.val.name,fontStyle:m.dm.get(t.val.matchSlope).css},children:e.text})}function CvSink(e,t,n){return s=>n.set((0,i.Uy)(n=>{n.charVariants[t]||(n.charVariants[t]={}),n.charVariants[t][e.key]=s}))}function CvClearSink(e,t,n){return()=>n.set((0,i.Uy)(n=>{let s=n.charVariants[t]||{};delete s[e.key],n.charVariants[t]=s}))}function ResultsPanel(){let{val:e}=(0,l.useContext)(S);return(0,s.jsx)("pre",{children:a.stringify({variants:(0,f.vn)(e,!0)})})}},7714:function(e,t,n){"use strict";n.d(t,{Y:function(){return ImportConfigurationPopupEnableButton},d:function(){return ImportConfigurationPopup}});var s=n(5893),a=n(7294),i=n(9072);function ImportConfigurationPopup(e){let[t,n]=(0,a.useState)("");return e.pUx.val.popupVisible?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"customizer popup-background",onClick:()=>e.pUx.set({...e.pUx.val,popupVisible:!1})}),(0,s.jsxs)("div",{className:"customizer popup",children:[(0,s.jsx)("h2",{children:"Import Configuration"}),(0,s.jsx)("div",{className:"inner",children:(0,s.jsx)("textarea",{value:t,onChange:e=>n(e.target.value)})}),(0,s.jsx)("input",{type:"button",value:"Import",onClick:()=>{let s=(0,i.S3)(t,i.sN);e.dropInheritedCvs&&(s=(0,i.mo)(s)),e.pCc.set(s),n(""),e.pUx.set({...e.pUx.val,popupVisible:!1})}})]})]}):null}function ImportConfigurationPopupEnableButton(e){return(0,s.jsx)("input",{type:"button",value:"Import Configuration",onClick:()=>e.set({popupVisible:!0})})}},4516:function(e,t,n){"use strict";n.d(t,{K:function(){return EnumSelect}});var s=n(5893);function EnumSelect(e){return(0,s.jsx)("select",{value:e.value,onChange:t=>e.onChange?e.onChange(Number(t.target.value)):void 0,children:Array.from(e.options).map(e=>{let[t,n]=e;return(0,s.jsx)("option",{value:t,children:n.display},t)})})}},9072:function(e,t,n){"use strict";n.d(t,{Lr:function(){return formatBuildPlan},O:function(){return slopeToCustomizerStyleKey},S3:function(){return parseCustomization},gV:function(){return resolveDisplayStyle},mo:function(){return dropInheritedCvs},sN:function(){return l},vn:function(){return getResolvedBuildPlanCharVariants}});var s=n(5022),a=n(9774),i=n(720),r=n(1972),o=n(6787);let l={family:"Iosevka Custom",serifStyle:i.Hn.Sans,spacing:i.Ki.Normal,defaultWidthAtExpanded:!1,charVariants:{},weightGradesIncluded:new Set(i.Id.keys()),widthGradesIncluded:new Set(i.PE.keys()),slopeGradesIncluded:new Set(i.dm.keys()),ligationSet:r.cy[1],fDisplayHighlight:!0,fExportCvSs:!1,fExportGlyphNames:!1};function parseCustomization(e,t){let n=s.parse(e);if(!isJsonMap(n.buildPlans))return t;for(let[e,s]of Object.entries(n.buildPlans))isJsonMap(s)&&("string"==typeof s.family&&(t={...t,family:s.family}),"string"==typeof s.spacing&&(t={...t,spacing:parseSpacingGrade(s.spacing)}),"string"==typeof s.serifs&&(t={...t,serifStyle:parseSerifsGrade(s.serifs)}),"boolean"==typeof s.noCvSs&&(t={...t,fExportCvSs:!s.noCvSs}),"boolean"==typeof s.exportGlyphNames&&(t={...t,fExportGlyphNames:s.exportGlyphNames}),isJsonMap(s.ligations)&&(t=parseLigations(s.ligations,t)),isJsonMap(s.variants)&&(t=parseCharVariants(s.variants,t)),isJsonMap(s.weights)&&(t=parseWeights(s.weights,t)),isJsonMap(s.widths)&&(t=parseWidths(s.widths,t)),isJsonMap(s.slopes)&&(t=parseSlopes(s.slopes,t)));return t}function isJsonMap(e){return!!e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)}function parseSpacingGrade(e){return i._H.find(i.Ki.Normal,(t,n)=>n.display===e)}function parseSerifsGrade(e){return i.xE.find(i.Hn.Sans,(t,n)=>n.display===e)}function parseWeights(e,t){let n=new Set;for(let[t,s]of Object.entries(e))if(isJsonMap(s)&&"number"==typeof s.shape)for(let[e,t]of i.Id)e===s.shape&&n.add(e);return t={...t,weightGradesIncluded:n}}function parseWidths(e,t){let n=new Set,s=!1;for(let[t,a]of Object.entries(e))if(isJsonMap(a)&&"number"==typeof a.shape&&"string"==typeof a.css)for(let[e,t]of i.FL)e===a.shape&&(n.add(e),a.css!==t.css&&(s=!0));return s?n.add(i.Lu.Expanded):n.add(i.Lu.Normal),{...t,defaultWidthAtExpanded:s,widthGradesIncluded:n}}function parseSlopes(e,t){let n=new Set;for(let[t,s]of Object.entries(e))if(isJsonMap(s)&&"string"==typeof s.shape)for(let[e,t]of i.dm)t.shape===s.shape&&n.add(e);return t={...t,slopeGradesIncluded:n}}function parseLigations(e,t){if("string"==typeof e.inherits){for(let n of r.cy)if(n.selector&&n.selector===e.inherits){t={...t,ligationSet:n};break}}return t}function parseCharVariants(e,t){let n={};if("string"==typeof e.inherits)for(let[t,s]of a.Xf)s.key===e.inherits&&(n={...n,inherits:s});for(let t of o.AT){let s=e[t];if(!isJsonMap(s))continue;let a={};for(let[e,t]of Object.entries(s))"string"==typeof t&&(a[e]=t);n={...n,[t]:a}}return t={...t,charVariants:n}}function formatBuildPlan(e){let t={family:e.family,spacing:i._H.get(e.spacing).display,serifs:i.xE.get(e.serifStyle).display,noCvSs:!e.fExportCvSs,exportGlyphNames:e.fExportGlyphNames};return e.ligationSet.selector||(t["no-ligation"]=!0),formatVariants(e,t),formatLigations(e,t),formatWeights(e,t),formatWidths(e,t),formatSlopes(e,t),t}function formatVariants(e,t){let n={};for(let t of(e.charVariants.inherits&&(n.inherits=e.charVariants.inherits.key),o.AT)){let s=e.charVariants[t];if(!s||!Object.keys(s).length)continue;let i={};for(let[e,t]of a.D)s[e]&&(i[e]=s[e]);n[t]=i}Object.keys(n).length&&(t.variants=n)}function formatLigations(e,t){e.ligationSet.selector&&e.ligationSet!==r.cy[1]&&(t.ligations={inherits:e.ligationSet.selector})}function formatWeights(e,t){let n=!0,s={};for(let[t,a]of i.Id)e.weightGradesIncluded.has(t)?s[a.display]={shape:t,menu:t,css:t}:n=!1;n||(t.weights=s)}function formatWidths(e,t){let n=!e.defaultWidthAtExpanded,s={};for(let[t,a]of i.FL)if(e.widthGradesIncluded.has(t)!==i.PE.has(t)&&(n=!1),e.widthGradesIncluded.has(t)){let n=t*(e.defaultWidthAtExpanded?500/600:1),a=i.Lu.Normal,r=i.Db.get(a);for(let[e,t]of i.Db)Math.abs(e-n)<Math.abs(a-n)&&(a=e,r=t);s[r.display]={shape:t,menu:r.menu,css:r.css}}n||(t.widths=s)}function formatSlopes(e,t){let n=!0,s={};for(let[t,a]of i.dm)e.slopeGradesIncluded.has(t)?s[a.display]={angle:a.angle,shape:a.shape,menu:a.shape,css:a.css}:n=!1;n||(t.slopes=s)}function resolveDisplayStyle(e){switch(e.serifStyle){case i.Hn.Sans:if(e.spacing===i.Ki.QuasiProportional)return i.bg.QP;if(e.spacing===i.Ki.QuasiProportionalExtOnly)return i.bg.QPE;return i.bg.Sans;case i.Hn.Slab:if(e.spacing===i.Ki.QuasiProportional)return i.bg.QPSlab;if(e.spacing===i.Ki.QuasiProportionalExtOnly)return i.bg.QPESlab;return i.bg.Slab}}function slopeToCustomizerStyleKey(e){switch(e){case i.m3.Upright:return"design";case i.m3.Italic:return"italic";case i.m3.Oblique:return"oblique";default:return"design"}}function getResolvedBuildPlanCharVariants(e,t){let n=o.yL(e.charVariants,{isSlab:e.serifStyle===i.Hn.Slab,slope:i.m3.Upright}),s=o.yL(e.charVariants,{isSlab:e.serifStyle===i.Hn.Slab,slope:i.m3.Italic}),a=o.yL(e.charVariants,{isSlab:e.serifStyle===i.Hn.Slab,slope:i.m3.Oblique});if(!t)return{design:n.resolvedNonDefaultComposition,italic:s.resolvedNonDefaultComposition,oblique:a.resolvedNonDefaultComposition};{let e=o.eu(s.resolvedComposition,n.resolvedComposition),t=o.eu(a.resolvedComposition,n.resolvedComposition),i={design:o.oU(n.resolvedNonDefaultComposition),...e?{italic:e}:{},...t?{oblique:t}:{}};return i}}function dropInheritedCvs(e){return{...e,charVariants:getResolvedBuildPlanCharVariants(e,!1)}}},7744:function(e,t,n){"use strict";n.d(t,{M:function(){return useStatePtr},_:function(){return a}});var s=n(7294);let a={Default:e=>({val:e,set:()=>{}}),Lens:(e,t)=>({val:e.val[t],set:n=>{n instanceof Function?e.set(e=>({...e,[t]:n(e[t])})):e.set(e=>({...e,[t]:n}))}})};function useStatePtr(e){let[t,n]=(0,s.useState)(e);return{val:t,set:n}}}},function(e){e.O(0,[774,637,113,888,179],function(){return e(e.s=7613)}),_N_E=e.O()}]);